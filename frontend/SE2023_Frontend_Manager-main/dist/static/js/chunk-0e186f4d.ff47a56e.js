(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e186f4d"],{"031a":function(t,e,a){"use strict";a("27b5")},"1c41":function(t,e,a){"use strict";a.d(e,"f",(function(){return r})),a.d(e,"h",(function(){return c})),a.d(e,"e",(function(){return o})),a.d(e,"a",(function(){return s})),a.d(e,"d",(function(){return d})),a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return u})),a.d(e,"g",(function(){return p}));a("99af");var n=a("b775"),i=a("7424"),r=function(t){var e="".concat(i["BASE_URL_IP"],"/api/result/all/").concat(t);return Object(n["f"])(e,n["a"].GET)},c=function(t){var e="".concat(i["BASE_URL_IP"],"/api/admin/search/result");return Object(n["f"])(e,n["a"].POST,t)},o=function(t){var e="".concat(i["BASE_URL_IP"],"/api/result/getinfo/").concat(t);return Object(n["f"])(e,n["a"].GET)},s=function(t){var e="".concat(i["BASE_URL_IP"],"/api/result/agree/").concat(t);return Object(n["f"])(e,n["a"].GET)},d=function(t){var e="".concat(i["BASE_URL_IP"],"/api/result/refuse/").concat(t);return Object(n["f"])(e,n["a"].GET)},l=function(t){var e=i["BASE_URL_IP"]+"/api/result/delete";return Object(n["f"])(e,n["a"].POST,t)},u=function(t){var e=i["BASE_URL_IP"]+"/api/admin/set/result";return Object(n["f"])(e,n["a"].POST,t)},p=function(t){var e="".concat(i["BASE_URL_IP"],"/api/result/all/unaudited/").concat(t);return Object(n["f"])(e,n["a"].GET)}},"27b5":function(t,e,a){},"88eb":function(t,e){t.exports={messages:{CN:{add:"添加",delete:"删除",save:"保存",cancel:"取消",edit:"编辑",deleteConfirm:"是否要删除此行？",newMember:"新增成员",table:{name:"成员姓名",number:"工号",department:"所属部门",operation:"操作"}},HK:{add:"添加",delete:"刪除",save:"保存",cancel:"取消",edit:"編輯",deleteConfirm:"是否要刪除此行？",newMember:"新增成員",table:{name:"成員姓名",number:"工號",department:"所屬部門",operation:"操作"}},US:{add:"add",delete:"delete",save:"save",cancel:"cancel",edit:"edit",deleteConfirm:"Confirm to delete this row?",newMember:"new member",table:{name:"Member Name",number:"Job Number",department:"Department",operation:"Operation"}}}}},d641:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{bordered:!1}},[a("h2",[t._v("选择成果类型")]),a("a-space",[a("a-select",{ref:"select",staticStyle:{width:"120px"},attrs:{disabled:!t.changeable},on:{change:t.selectChange},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}},[a("a-select-option",{attrs:{value:"1"}},[t._v("认证中")]),a("a-select-option",{attrs:{value:"2"}},[t._v("已认证")]),a("a-select-option",{attrs:{value:"3"}},[t._v("全部")])],1),a("a-input-search",{staticStyle:{width:"300px","margin-left":"10px"},attrs:{placeholder:"请输入成果关键词","enter-button":""},on:{search:function(e){return t.onSearch()}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),a("a-modal",{attrs:{title:"添加成果"},on:{ok:t.handleOk},model:{value:t.result_visible,callback:function(e){t.result_visible=e},expression:"result_visible"}},[a("a-form",{attrs:{form:t.result_info,"label-col":{span:5},"wrapper-col":{span:12}},on:{submit:t.handleSubmit}},[a("a-form-item",{attrs:{label:"成果标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["note",{rules:[{required:!0,message:"请输入有效的成果标题!"}]}],expression:"['note', { rules: [{ required: true, message: '请输入有效的成果标题!' }] }]"}],attrs:{placeholder:"请输入成果标题"}})],1),a("a-form-item",{attrs:{label:"成果摘要"}},[a("a-input",{attrs:{type:"textarea",placeholder:"请输入成果摘要"}})],1),a("a-form-item",{attrs:{label:"成果作者"}},[a("a-input",{attrs:{placeholder:"多个作者用英文逗号分隔"}})],1),a("a-form-model-item",{attrs:{label:"成果领域"}},[a("a-select",{attrs:{placeholder:"请为您的成果确定主要领域方向"}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 信息技术 ")]),a("a-select-option",{attrs:{value:"1"}},[t._v(" 装备制造 ")]),a("a-select-option",{attrs:{value:"2"}},[t._v(" 新材料 ")]),a("a-select-option",{attrs:{value:"3"}},[t._v(" 新能源 ")]),a("a-select-option",{attrs:{value:"4"}},[t._v(" 节能环保 ")]),a("a-select-option",{attrs:{value:"5"}},[t._v(" 生物医药 ")]),a("a-select-option",{attrs:{value:"6"}},[t._v(" 科学创意 ")]),a("a-select-option",{attrs:{value:"7"}},[t._v(" 检验检测 ")]),a("a-select-option",{attrs:{value:"8"}},[t._v(" 其他 ")])],1)],1),a("a-form-model-item",{attrs:{label:"成果阶段"}},[a("a-radio-group",[a("a-radio",{attrs:{value:"0"}},[t._v(" 实验室 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 样品 ")]),a("a-radio",{attrs:{value:"2"}},[t._v(" 中试 ")]),a("a-radio",{attrs:{value:"3"}},[t._v(" 产业化 ")])],1)],1),a("a-form-item",{attrs:{label:"成果内容"}},[a("a-input",{attrs:{type:"textarea",placeholder:"介绍成果的内容"}})],1)],1)],1)],1),a("br"),a("br"),a("a-table",{key:t.itemKey,attrs:{"data-source":t.data,columns:t.columns,pagination:t.pagination},scopedSlots:t._u([t._l(["name","pyear","field","period","abstract","content"],(function(e){return{key:e,fn:function(n,i){return[a("div",{key:e,staticClass:"ellipsis",staticStyle:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[i.editable?a("a-input",{staticClass:"ellipsis",staticStyle:{margin:"-5px 0"},attrs:{value:n},on:{change:function(a){return t.handleChange(a.target.value,i,e)}}}):[t._v(" "+t._s(n)+" ")]],2)]}}})),{key:"operation",fn:function(e,n){return[a("div",{staticClass:"editable-row-operations"},[n.editable?a("span",[a("a-space",[a("a",{on:{click:function(){return t.save(n.key)}}},[t._v("Save")]),a("a-popconfirm",{attrs:{title:"Sure to cancel?"},on:{confirm:function(){return t.cancel(n.key)}}},[a("a",[t._v("Cancel")])])],1)],1):a("span",[a("a",{attrs:{disabled:""!==t.editingKey},on:{click:function(){return t.edit(n.key)}}},[t._v("Edit")])])]),t.data.length?a("a-popconfirm",{attrs:{title:"Sure to delete?"},on:{confirm:function(){return t.onDelete(n.key)}}},[a("a",{attrs:{href:"javascript:0;"}},[t._v("Delete")])]):t._e()]}}],null,!0)})],1)},r=[],c=a("2909"),o=a("c7eb"),s=a("1da1"),d=a("5530"),l=(a("d81d"),a("14d9"),a("4de4"),a("d3b7"),a("b0c0"),a("1c41")),u=[{title:"成果名",dataIndex:"name",width:"20%",scopedSlots:{customRender:"name"}},{title:"年份",dataIndex:"pyear",width:"10%",scopedSlots:{customRender:"pyear"}},{title:"领域",dataIndex:"field",width:"10%",scopedSlots:{customRender:"field"}},{title:"阶段",dataIndex:"period",width:"10%",scopedSlots:{customRender:"period"}},{title:"摘要",dataIndex:"abstract",width:"20%",scopedSlots:{customRender:"abstract"}},{title:"内容",dataIndex:"content",width:"20%",scopedSlots:{customRender:"content"}},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],p=[],f={name:"ResultForm",inject:["reload"],i18n:a("88eb"),data:function(){var t=this;return this.cacheData=p.map((function(t){return Object(d["a"])({},t)})),{type:"",type1:0,data:p,columns:u,editingKey:"",editData:{},searchText:"",changeable:!0,selectedType:"全部",pagination:{current:1,onChange:function(e){t.changeable?(t.$forceUpdate(),Object(l["f"])(e).then((function(a){var n=a.data;p.length=0;for(var i=0;i<n.data.length;i++)0==n.data[i].state?t.type="认证中":1==n.data[i].state?t.type="已认证":2==n.data[i].state&&(t.type="认证失败"),p.push({key:n.data[i].id,name:n.data[i].title,pyear:n.data[i].pyear,abstract:n.data[i].abstract,content:n.data[i].content,type:t.type,period:n.data[i].period,field:n.data[i].field,editable:!1});t.cacheData=p.map((function(t){return Object(d["a"])({},t)})),t.totalCnt=n.data.total_count,t.loading=!1,t.pagination.current=e})).catch((function(t){}))):alert("请完成修改后再切换页面！")},total:10},itemKey:""}},watch:{editingKey:function(t){this.changeable=""===t}},mounted:function(){this.init()},methods:{init:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.loadResult();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadResult:function(){var t=this;this.loading=!0,p.length=0,this.pagination.current=1,Object(l["f"])(1).then((function(e){for(var a=0;a<p.length;a++)p[a].target=!1;var n=e.data;p.length=0;for(var i=0;i<n.data.length;i++)0==n.data[i].state?t.type="认证中":1==n.data[i].state?t.type="已认证":2==n.data[i].state&&(t.type="认证失败"),p.push({key:n.data[i].id,name:n.data[i].title,abstract:n.data[i].abstract,content:n.data[i].content,pyear:n.data[i].pyear,type:t.type,period:n.data[i].period,field:n.data[i].field,editable:!1});t.cacheData=p.map((function(t){return Object(d["a"])({},t)})),t.totalCnt=n.data.total_count,t.loading=!1,t.pagination.total=n.page_num})).catch((function(t){}))},onDelete:function(t){var e=this,a=Object(c["a"])(this.data);this.data=a.filter((function(e){return e.key!==t}));var n=a.filter((function(e){return t===e.key}))[0],i={id:n.key,name:n.name,type:this.type,period:n.period,abstract:n.abstract,content:n.content,pyear:n.pyear,field:n.field},r=this;Object(l["b"])(i).then((function(t){e.$message.info("成功删除")})).then((function(t){r.reload()})).catch((function(t){}))},handleChange:function(t,e,a){this.editData.key||(this.editData=e),"name"===a?this.editData.name=t:"abstract"===a?this.editData.abstract=t:"field"===a?this.editData.field=t:"period"===a?this.editData.period=t:"pyear"===a?this.editData.pyear=t:"content"===a&&(this.editData.content=t),this.loadResult()},edit:function(t){var e=Object(c["a"])(this.data),a=e.filter((function(e){return t===e.key}))[0];this.editingKey=t,a&&(a.editable=!0,this.data=e)},save:function(t){var e=this,a=Object(c["a"])(this.data),n=Object(c["a"])(this.cacheData),r=a.filter((function(e){return t===e.key}))[0],o=n.filter((function(e){return t===e.key}))[0];r&&o&&(delete r.editable,this.data=a,Object.assign(o,r),this.cacheData=n),this.editingKey="";var s={id:this.editData.key,title:this.editData.name,period:this.editData.period,abstract:this.editData.abstract,content:this.data[i].content,pyear:this.data[i].pyear,field:this.editData.field},d=this;Object(l["c"])(s).then((function(t){e.$message.info("成功修改")})).then((function(t){d.reload()})).catch((function(t){e.$message.error("无法修改")})),r&&(Object.assign(r,this.cacheData.filter((function(e){return t===e.key}))[0]),delete r.editable,this.data=a),this.reload()},cancel:function(t){var e=this,a=new Promise((function(a,n){var i=Object(c["a"])(e.data),r=i.filter((function(e){return t===e.key}))[0];e.editingKey="",r&&(Object.assign(r,e.cacheData.filter((function(e){return t===e.key}))[0]),delete r.editable,e.data=i),a()}));a.then(e.reload())},adminCreateResult:function(){this.result_visible=!0},selectChange:function(t){var e=this;this.changeable?(this.pagination.current=1,Object(l["f"])(1).then((function(t){var a=t.data;p.length=0;for(var n=0;n<a.data.length;n++)0==a.data[n].state?e.type="认证中":1==a.data[n].state?e.type="已认证":2==a.data[n].state&&(e.type="认证失败"),p.push({key:a.data[n].id,name:a.data[n].title,abstract:a.data[n].abstract,content:a.data[n].content,pyear:a.data[n].pyear,period:a.data[n].period,field:a.data[n].field,type:e.type,editable:!1});e.totalCnt=a.data.total_count,e.loading=!1,e.pagination.total=a.page_num,e.itemKey=Math.random()})).catch((function(t){}))):alert("请先完成编辑！")},onSearch:function(){var t=this;this.loading=!0,p.length=0,this.pagination.current=1;var e={title:this.searchText,page:this.pagination.current};Object(l["h"])(e).then((function(e){for(var a=0;a<p.length;a++)p[a].target=!1;var n=e.data;p.length=0;for(var i=0;i<n.data.length;i++)0==n.data[i].state?t.type="认证中":1==n.data[i].state?t.type="已认证":2==n.data[i].state&&(t.type="认证失败"),p.push({key:n.data[i].id,name:n.data[i].title,abstract:n.data[i].abstract,pyear:n.data[i].pyear,content:n.data[i].content,type:t.type,period:n.data[i].period,field:n.data[i].field,editable:!1});t.cacheData=p.map((function(t){return Object(d["a"])({},t)})),t.totalCnt=n.data.total_count,t.loading=!1,t.pagination.total=n.page_num})).catch((function(t){}))}}},h=f,b=(a("031a"),a("2877")),m=Object(b["a"])(h,n,r,!1,null,"34e30966",null);e["default"]=m.exports}}]);