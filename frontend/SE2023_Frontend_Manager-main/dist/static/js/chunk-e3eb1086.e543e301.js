(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e3eb1086"],{"3e24":function(e,t,a){},7594:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-table",{attrs:{"data-source":e.data,columns:e.columns},scopedSlots:e._u([{key:"operation",fn:function(t,n){return[a("div",[a("span",[0==n.flag?a("a",{on:{click:function(t){return e.checkFeedback(n)}}},[e._v("回复")]):a("a",[e._v("已成功回复")]),a("a-modal",{attrs:{title:"回复反馈",width:"750px","mask-closable":!1},on:{ok:function(t){return e.handleOk()}},model:{value:e.showDetail,callback:function(t){e.showDetail=t},expression:"showDetail"}},[a("a-card",{attrs:{bordered:!1,"dis-hover":""}},[a("a-row",[e._v("姓名："+e._s(e.selectData.name))]),a("br"),a("a-row",[e._v("性别："+e._s(e.selectData.sex))]),a("br"),a("a-row",[e._v("邮箱："+e._s(e.selectData.email))]),a("br"),a("a-row",[e._v("问题类型："+e._s(e.selectData.qtype))]),a("br"),a("a-row",[e._v("发布时间："+e._s(e.selectData.datatime))]),a("br"),a("a-row",[e._v("问题："+e._s(e.selectData.description))]),a("br"),a("a-row",[e._v("回答：")]),a("br"),a("a-textarea",{model:{value:e.reply,callback:function(t){e.reply=t},expression:"reply"}})],1)],1)],1)])]}},{key:"expandedRowRender",fn:function(t,n){return[a("p",{staticStyle:{margin:"0"}},[e._v(" "+e._s(t.description)+" ")]),a("br"),t.flag?a("div",[a("p",{staticStyle:{margin:"0"}},[e._v(" 回复： ")]),a("br"),a("p",{staticStyle:{margin:"0"}},[e._v(" "+e._s(t.message)+" ")])]):a("div",[a("p",{staticStyle:{margin:"0"}},[e._v(" 暂未回复 ")])])]}}])})],1)},s=[],i=a("c7eb"),c=a("1da1"),o=(a("14d9"),a("b0c0"),a("a4d3"),a("e01a"),a("b775")),r=a("7424"),d=function(){var e="".concat(r["BASE_URL_IP"],"/api/feedback/getall");return Object(o["f"])(e,o["a"].GET)},l=function(e,t){var a="".concat(r["BASE_URL_IP"],"/api/feedback/reply");return Object(o["f"])(a,t,e)},u=[{title:"姓名",dataIndex:"name",scopedSlots:{customRender:"name"},width:100},{title:"性别",dataIndex:"sex",scopedSlots:{customRender:"sex"},width:100},{title:"邮箱",dataIndex:"email",scopedSlots:{customRender:"email"},width:150},{title:"问题类型",dataIndex:"qtype",scopedSlots:{customRender:"qtype"},width:150},{title:"发布时间",dataIndex:"datatime",scopedSlots:{customRender:"datatime"},width:150},{title:"回复状态",dataIndex:"state",scopedSlots:{customRender:"state"},width:150},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:150,render:function(){return h("a",["反馈"])}}],p=[],f={name:"feedbackList",inject:["reload"],components:{},data:function(){return{data:p,columns:u,showDetail:!1,reply:"",selectData:{}}},mounted:function(){this.init()},methods:{init:function(){var e=Object(c["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadNeed();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadNeed:function(){p.length=0,d().then((function(e){for(var t=e.data.data,a=0;a<t.length;a++){t[a].qtype;for(var n=t[a].qtype[0],s=1;s<t[a].qtype.length;s++)n=n+", "+t[a].qtype[s];var i="";i=1==t[a].flag?"已回复":"未回复",p.push({feedback_id:t[a].feedback_id,user_id:t[a].user_id,name:t[a].name,email:t[a].email,sex:t[a].sex,qtype:n,description:t[a].description,datatime:t[a].datatime,flag:t[a].flag,message:t[a].message,state:i})}})).catch((function(e){}))},handleOk:function(){this.showDetail=!1;var e={feedback_id:this.selectData.feedback_id,message:this.reply};l(e,"post").then((function(e){})).catch((function(e){})),this.reload()},checkFeedback:function(e){this.showDetail=!0,this.selectData=e}}},m=f,b=(a("7927"),a("2877")),_=Object(b["a"])(m,n,s,!1,null,"d739ce36",null);t["default"]=_.exports},7927:function(e,t,a){"use strict";a("3e24")}}]);